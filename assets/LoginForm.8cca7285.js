var b=(S,p,r)=>new Promise((l,d)=>{var t=n=>{try{u(r.next(n))}catch(c){d(c)}},g=n=>{try{u(r.throw(n))}catch(c){d(c)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(t,g);u((r=r.apply(S,p)).next())});import{a as $,I,c as K,b as N,s as U,v,w as G,x as V,f as j,j as e,o as A,i as P,y as R,z as h,p as s,B as a,C as x,t as _,D as E,E as q,F as O,G as H}from"./index.f13df184.js";import{C as J}from"./index.7701d4e5.js";import{F as L}from"./index.eea8b1fb.js";import"./index.1b5821d3.js";import{u as Q,a as W,L as z,_ as X,b as Y}from"./LoginFormTitle.03b8485b.js";import{C as Z,R as ee}from"./index.945fec30.js";import"./_baseIteratee.afed0e27.js";import"./_baseIsEqual.cda019a9.js";import"./get.3bd42a14.js";import"./toInteger.3185abf0.js";import"./isEqual.1f535f8c.js";import"./useSize.e0e747e5.js";import"./responsiveObserve.056994ac.js";const ge=$({__name:"LoginForm",setup(S){const p=Z,r=ee,l=L.Item,d=I.Password,{t}=K(),{notification:g,createErrorModal:u}=H(),{prefixCls:n}=N("login"),c=U(),{setLoginState:B,getLoginState:D}=Q(),{getFormRules:M}=W(),k=v(),y=v(!1),C=v(!1),m=G({account:"zjx",password:"123456"}),{validForm:T}=Y(k);V("Enter",w);const F=j(()=>e(D)===z.LOGIN);function w(){return b(this,null,function*(){const f=yield T();if(!!f)try{y.value=!0;const o=yield c.login({password:f.password,username:f.account,mode:"none"});o&&g.success({message:t("sys.login.loginSuccessTitle"),description:`${t("sys.login.loginSuccessDesc")}: ${o.username}`,duration:3})}catch(o){u({title:t("sys.api.errorTip"),content:o.message||t("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${n}`)||document.body})}finally{y.value=!1}})}return(f,o)=>(A(),P(O,null,[R(s(X,{class:"enter-x"},null,512),[[h,e(F)]]),R(s(e(L),{class:"p-4 enter-x",model:m,rules:e(M),ref_key:"formRef",ref:k,onKeypress:q(w,["enter"])},{default:a(()=>[s(e(l),{name:"account",class:"enter-x"},{default:a(()=>[s(e(I),{size:"large",value:m.account,"onUpdate:value":o[0]||(o[0]=i=>m.account=i),placeholder:e(t)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(l),{name:"password",class:"enter-x"},{default:a(()=>[s(e(d),{size:"large",visibilityToggle:"",value:m.password,"onUpdate:value":o[1]||(o[1]=i=>m.password=i),placeholder:e(t)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(r),{class:"enter-x"},{default:a(()=>[s(e(p),{span:12},{default:a(()=>[s(e(l),null,{default:a(()=>[s(e(J),{checked:C.value,"onUpdate:checked":o[2]||(o[2]=i=>C.value=i),size:"small"},{default:a(()=>[x(_(e(t)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),s(e(p),{span:12},{default:a(()=>[s(e(E),{onClick:o[3]||(o[3]=i=>e(B)(e(z).REGISTER)),type:"link",style:{"margin-left":"150px"}},{default:a(()=>[x(_(e(t)("sys.login.registerButton")),1)]),_:1})]),_:1})]),_:1}),s(e(l),{class:"enter-x"},{default:a(()=>[s(e(E),{type:"primary",size:"large",block:"",onClick:w,loading:y.value},{default:a(()=>[x(_(e(t)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules","onKeypress"]),[[h,e(F)]])],64))}});export{ge as default};
